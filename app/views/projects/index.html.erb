<p id="notice"><%= notice %></p>

<h1>Projects</h1>

<table id="jqGrid"></table>
<div id="jqGridPager"></div>


<script type="text/javascript">

  $(document).ready(function () {
    $("#jqGrid").jqGrid({
      url: "/projects",
      datatype: "json",
      mtype: 'GET',
      colNames: ['ID#', 'Name', 'Status', 'Capitalizable', 'Weight', 'Release Date', 'Description'],
      colModel: [
        {
          name: "id",
          index: "id",
          width: 10
        },
        {
          name: 'name',
          index: "id",
          width: 100,
          editable: true // must set editable to true if you want to make the field editable
        },
        {
          name: 'status',
          index: "id",
          width: 30,
          editable: true
        },
        {
          name: 'is_capitalizable',
          index: "id",
          width: 30,
          editable: true
        },
        {
          name: 'weight',
          index: "id",
          width: 20,
          editable: true
        },
        {
          name: 'release_date',
          index: "id",
          width: 20,
          editable: true
        },{
          name: 'description',
          index: "id",
          width: 200,
          editable: true
        }
      ],
      pager: "#jqGridPager",
      rowNum: 5,
      rowList : [10, 20, 30],
      sortname : 'id',
      viewrecords: true,

      //onSelectRow: editRow, // the javascript function to call on row click. will ues to to put the row in edit mode

    }).jqGrid("navGrid", "#jqGridPager", {
      edit: true,
      add: true,
      del: true
    }, {url: "/projects/update"}, {url: "/projects/create"}, {url: "projects/destroy/"}, {
      closeAfterEdit: true,
      closeOnEscape: true
    });

    /*
     var lastSelection;

     function editRow(id) {
     if (id && id !== lastSelection) {
     var grid = $("#jqGrid");
     grid.jqGrid('restoreRow', lastSelection);
     grid.jqGrid('editRow', id, {keys: true});
     lastSelection = id;
     }
     }
     */
  });

</script>
